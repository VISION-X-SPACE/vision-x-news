// ========================================
// Ù†Ø¸Ø§Ù… Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ©
// ========================================

const newsSources = {
  // Ù…ØµØ§Ø¯Ø± Ø¹Ø±Ø¨ÙŠØ©
  aljazeera: 'https://www.aljazeera.net/aljazeerarss/',
  bbcArabic: 'http://feeds.bbci.co.uk/arabic/rss.xml',
  
  // Ù…ØµØ§Ø¯Ø± Ø¹Ø§Ù„Ù…ÙŠØ©
  techCrunch: 'http://feeds.feedburner.com/TechCrunch/',
  hackerNews: 'https://news.ycombinator.com/rss',
  
  // Ù…ØµØ§Ø¯Ø± Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©
  bloomberg: 'https://www.bloomberg.com/ar/middle-east.rss',
  reuters: 'http://feeds.reuters.com/reuters/topNews'
};

const API_KEYS = {
  newsApi: 'YOUR_NEWSAPI_KEY', // Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ù…Ù† https://newsapi.org
  mediastack: 'YOUR_MEDIASTACK_KEY' // Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ù…Ù† https://mediastack.com
};

class NewsAggregator {
  constructor() {
    this.categories = {
      technology: ['artificial intelligence', 'programming', 'gadgets', 'cybersecurity'],
      finance: ['stocks', 'cryptocurrency', 'markets', 'economy'],
      science: ['space', 'research', 'discoveries', 'environment']
    };
    
    this.cachedNews = [];
    this.lastFetchTime = null;
    this.updateInterval = 60 * 60 * 1000; // Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©
  }

  async fetchFromMultipleSources() {
    const newsPromises = [];
    
    // 1. NewsAPI (Ù…ØµØ¯Ø± Ø±Ø¦ÙŠØ³ÙŠ)
    newsPromises.push(this.fetchFromNewsAPI());
    
    // 2. RSS Feeds
    newsPromises.push(this.fetchFromRSS(newsSources.aljazeera));
    newsPromises.push(this.fetchFromRSS(newsSources.techCrunch));
    
    // 3. APIs Ø£Ø®Ø±Ù‰
    newsPromises.push(this.fetchFromMediastack());
    
    try {
      const results = await Promise.allSettled(newsPromises);
      const allNews = [];
      
      results.forEach(result => {
        if (result.status === 'fulfilled' && result.value) {
          allNews.push(...result.value);
        }
      });
      
      return this.processAndDeduplicate(allNews);
    } catch (error) {
      console.error('Error fetching news:', error);
      return this.getFallbackNews();
    }
  }

  async fetchFromNewsAPI() {
    try {
      const response = await fetch(
        `https://newsapi.org/v2/top-headlines?category=technology&language=ar&pageSize=50&apiKey=${API_KEYS.newsApi}`
      );
      
      const data = await response.json();
      return data.articles.map(article => ({
        title: article.title,
        description: article.description,
        content: article.content,
        url: article.url,
        imageUrl: article.urlToImage,
        source: article.source.name,
        publishedAt: article.publishedAt,
        category: this.categorizeArticle(article.title),
        language: 'ar'
      }));
    } catch (error) {
      console.error('NewsAPI Error:', error);
      return [];
    }
  }

  async fetchFromRSS(rssUrl) {
    try {
      const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`);
      const data = await response.json();
      
      return data.items.map(item => ({
        title: item.title,
        description: item.description,
        content: this.extractTextFromHTML(item.content),
        url: item.link,
        imageUrl: item.enclosure?.link || this.extractFirstImage(item.content),
        source: data.feed.title,
        publishedAt: item.pubDate,
        category: this.categorizeArticle(item.title),
        language: this.detectLanguage(item.title)
      }));
    } catch (error) {
      console.error('RSS Fetch Error:', error);
      return [];
    }
  }

  async fetchFromMediastack() {
    try {
      const response = await fetch(
        `http://api.mediastack.com/v1/news?access_key=${API_KEYS.mediastack}&languages=ar,en&categories=technology,science&limit=30`
      );
      
      const data = await response.json();
      return data.data.map(item => ({
        title: item.title,
        description: item.description,
        content: null,
        url: item.url,
        imageUrl: item.image,
        source: item.source,
        publishedAt: item.published_at,
        category: item.category,
        language: item.language,
        country: item.country
      }));
    } catch (error) {
      console.error('Mediastack Error:', error);
      return [];
    }
  }

  categorizeArticle(title) {
    const titleLower = title.toLowerCase();
    
    for (const [category, keywords] of Object.entries(this.categories)) {
      if (keywords.some(keyword => titleLower.includes(keyword))) {
        return category;
      }
    }
    
    return 'general';
  }

  detectLanguage(text) {
    const arabicPattern = /[\u0600-\u06FF]/;
    return arabicPattern.test(text) ? 'ar' : 'en';
  }

  extractTextFromHTML(html) {
    if (!html) return '';
    return html.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
  }

  extractFirstImage(html) {
    if (!html) return null;
    const imgMatch = html.match(/<img[^>]+src="([^">]+)"/);
    return imgMatch ? imgMatch[1] : null;
  }

  processAndDeduplicate(articles) {
    const uniqueArticles = [];
    const seenTitles = new Set();
    
    for (const article of articles) {
      const normalizedTitle = article.title.toLowerCase().trim();
      
      if (!seenTitles.has(normalizedTitle) && article.title && article.description) {
        seenTitles.add(normalizedTitle);
        
        // Ø¥Ø¶Ø§ÙØ© ID ÙØ±ÙŠØ¯
        article.id = `news_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        if (!article.imageUrl) {
          article.imageUrl = this.getDefaultImage(article.category);
        }
        
        // ØªØ±Ø¬Ù…Ø© Ø§Ù„ØªØµÙ†ÙŠÙ Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
        article.categoryAr = this.translateCategory(article.category);
        
        uniqueArticles.push(article);
      }
    }
    
    return uniqueArticles.sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt));
  }

  getDefaultImage(category) {
    const categoryImages = {
      technology: 'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=250&fit=crop',
      finance: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=250&fit=crop',
      science: 'https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=400&h=250&fit=crop',
      general: 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w-400&h=250&fit=crop'
    };
    
    return categoryImages[category] || categoryImages.general;
  }

  translateCategory(category) {
    const translations = {
      technology: 'ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§',
      finance: 'Ø§Ù‚ØªØµØ§Ø¯',
      science: 'Ø¹Ù„ÙˆÙ…',
      general: 'Ø¹Ø§Ù…'
    };
    
    return translations[category] || 'Ø¹Ø§Ù…';
  }

  getFallbackNews() {
    // Ø£Ø®Ø¨Ø§Ø± Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ù…ØµØ§Ø¯Ø±
    return [...this.cachedNews].slice(0, 10);
  }
}

// ========================================
// Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
// ========================================

class NewsCache {
  constructor() {
    this.STORAGE_KEY = 'vision_x_news_cache';
    this.MAX_CACHE_SIZE = 500; // Ø£Ù‚ØµÙ‰ Ø¹Ø¯Ø¯ Ù„Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ø®Ø²Ù†Ø©
    this.CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 Ø³Ø§Ø¹Ø©
  }

  saveToCache(news) {
    try {
      const cacheData = {
        news: news.slice(0, this.MAX_CACHE_SIZE),
        timestamp: Date.now()
      };
      
      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(cacheData));
    } catch (error) {
      console.error('Cache save error:', error);
    }
  }

  loadFromCache() {
    try {
      const cached = localStorage.getItem(this.STORAGE_KEY);
      if (!cached) return null;
      
      const cacheData = JSON.parse(cached);
      
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙƒØ§Ø´
      if (Date.now() - cacheData.timestamp < this.CACHE_DURATION) {
        return cacheData.news;
      }
      
      return null;
    } catch (error) {
      console.error('Cache load error:', error);
      return null;
    }
  }

  clearOldCache() {
    try {
      localStorage.removeItem(this.STORAGE_KEY);
    } catch (error) {
      console.error('Cache clear error:', error);
    }
  }
}

// ========================================
// Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
// ========================================

class DynamicNewsRenderer {
  constructor() {
    this.newsGrid = document.getElementById('newsGrid');
    this.currentNews = [];
    this.pageSize = 12;
    this.currentPage = 0;
    this.isLoading = false;
    
    this.initInfiniteScroll();
    this.initFilters();
  }

  async loadInitialNews() {
    this.showLoadingSkeleton(6);
    
    const aggregator = new NewsAggregator();
    const cache = new NewsCache();
    
    // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ÙƒØ§Ø´ Ø£ÙˆÙ„Ø§Ù‹
    const cachedNews = cache.loadFromCache();
    
    if (cachedNews && cachedNews.length > 0) {
      this.currentNews = cachedNews;
      this.renderNewsPage(0);
      
      // ØªØ­Ø¯ÙŠØ« Ø®Ù„ÙÙŠ
      setTimeout(() => this.refreshNews(), 1000);
    } else {
      await this.refreshNews();
    }
  }

  async refreshNews() {
    if (this.isLoading) return;
    
    this.isLoading = true;
    this.showUpdateNotification();
    
    try {
      const aggregator = new NewsAggregator();
      const cache = new NewsCache();
      
      const newNews = await aggregator.fetchFromMultipleSources();
      
      if (newNews.length > 0) {
        this.currentNews = newNews;
        cache.saveToCache(newNews);
        
        this.currentPage = 0;
        this.renderNewsPage(0);
        
        this.showNewNewsNotification(newNews.length);
      }
    } catch (error) {
      console.error('Failed to refresh news:', error);
      this.showErrorNotification();
    } finally {
      this.isLoading = false;
      this.hideUpdateNotification();
    }
  }

  renderNewsPage(page) {
    if (!this.newsGrid) return;
    
    const start = page * this.pageSize;
    const end = start + this.pageSize;
    const pageNews = this.currentNews.slice(start, end);
    
    if (page === 0) {
      this.newsGrid.innerHTML = '';
    }
    
    pageNews.forEach((article, index) => {
      const newsCard = this.createNewsCard(article, start + index + 1);
      this.newsGrid.appendChild(newsCard);
    });
    
    this.attachCardEvents();
  }

  createNewsCard(article, index) {
    const card = document.createElement('article');
    card.className = 'news-card';
    card.setAttribute('data-article', article.id);
    card.setAttribute('data-index', index);
    card.style.animationDelay = `${(index % 6) * 0.1}s`;
    
    const timeAgo = this.getTimeAgo(article.publishedAt);
    const categoryIcon = this.getCategoryIcon(article.category);
    
    card.innerHTML = `
      <div class="card-image-wrapper">
        <img src="${article.imageUrl}" 
             alt="${article.title}" 
             class="card-img" 
             loading="${index < 4 ? 'eager' : 'lazy'}"
             onerror="this.src='https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?w=400&h=250&fit=crop'">
        <div class="card-image-overlay"></div>
        <div class="card-actions-overlay">
          <button class="overlay-btn bookmark-btn" data-article="${article.id}">
            <i class="far fa-bookmark"></i>
          </button>
          <button class="overlay-btn share-trigger" data-article="${article.id}">
            <i class="fas fa-share-alt"></i>
          </button>
          <button class="overlay-btn translate-btn" data-text="${article.title}">
            <i class="fas fa-language"></i>
          </button>
        </div>
        ${index <= 3 ? '<span class="new-badge">ğŸ”¥ Ø¬Ø¯ÙŠØ¯</span>' : ''}
      </div>
      <div class="card-body">
        <div class="card-meta">
          <span class="category">
            <i class="fas ${categoryIcon}"></i>
            ${article.categoryAr}
          </span>
          <span class="card-date" title="${new Date(article.publishedAt).toLocaleString('ar-EG')}">
            ${timeAgo}
          </span>
        </div>
        <h3 class="card-title">${this.truncateText(article.title, 80)}</h3>
        <p class="card-excerpt">${this.truncateText(article.description || '', 120)}</p>
        <div class="card-footer">
          <div class="ai-score">
            <span>ğŸ“°</span> ${article.source}
            ${article.language === 'ar' ? '<span class="lang-badge">Ø¹Ø±Ø¨ÙŠ</span>' : ''}
          </div>
          <div class="card-share">
            <button class="share-btn twitter-share" data-article="${article.id}">
              <i class="fab fa-twitter"></i>
            </button>
            <button class="share-btn facebook-share" data-article="${article.id}">
              <i class="fab fa-facebook-f"></i>
            </button>
            <button class="share-btn read-btn" data-url="${article.url}" target="_blank">
              <i class="fas fa-external-link-alt"></i>
            </button>
          </div>
        </div>
      </div>
    `;
    
    return card;
  }

  initInfiniteScroll() {
    let ticking = false;
    
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
          
          if (scrollTop + clientHeight >= scrollHeight - 300 && !this.isLoading) {
            this.loadMoreNews();
          }
          
          ticking = false;
        });
        
        ticking = true;
      }
    });
  }

  loadMoreNews() {
    this.currentPage++;
    const totalPages = Math.ceil(this.currentNews.length / this.pageSize);
    
    if (this.currentPage < totalPages) {
      this.renderNewsPage(this.currentPage);
    } else {
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
      this.refreshNews();
    }
  }

  initFilters() {
    // Ø¥Ø¶Ø§ÙØ© Ø£Ø²Ø±Ø§Ø± ØªØµÙÙŠØ© Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©
    const filterContainer = document.querySelector('.section-header');
    if (filterContainer) {
      const filterHTML = `
        <div class="news-filters">
          <button class="filter-btn active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
          <button class="filter-btn" data-filter="technology">ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</button>
          <button class="filter-btn" data-filter="finance">Ø§Ù‚ØªØµØ§Ø¯</button>
          <button class="filter-btn" data-filter="science">Ø¹Ù„ÙˆÙ…</button>
          <button class="filter-btn" data-filter="arabic">Ø¹Ø±Ø¨ÙŠ ÙÙ‚Ø·</button>
        </div>
      `;
      
      filterContainer.insertAdjacentHTML('beforeend', filterHTML);
      
      // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ÙÙ„ØªØ±
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const filter = e.target.dataset.filter;
          this.applyFilter(filter);
          
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          e.target.classList.add('active');
        });
      });
    }
  }

  applyFilter(filter) {
    let filteredNews = [...this.currentNews];
    
    switch (filter) {
      case 'technology':
        filteredNews = filteredNews.filter(n => n.category === 'technology');
        break;
      case 'finance':
        filteredNews = filteredNews.filter(n => n.category === 'finance');
        break;
      case 'science':
        filteredNews = filteredNews.filter(n => n.category === 'science');
        break;
      case 'arabic':
        filteredNews = filteredNews.filter(n => n.language === 'ar');
        break;
    }
    
    this.newsGrid.innerHTML = '';
    this.currentNews = filteredNews;
    this.currentPage = 0;
    this.renderNewsPage(0);
  }

  // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
  getTimeAgo(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffMs = now - date;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMs / 3600000);
    const diffDays = Math.floor(diffMs / 86400000);
    
    if (diffMins < 1) return 'Ø§Ù„Ø¢Ù†';
    if (diffMins < 60) return `Ù‚Ø¨Ù„ ${diffMins} Ø¯Ù‚ÙŠÙ‚Ø©`;
    if (diffHours < 24) return `Ù‚Ø¨Ù„ ${diffHours} Ø³Ø§Ø¹Ø©`;
    if (diffDays < 7) return `Ù‚Ø¨Ù„ ${diffDays} ÙŠÙˆÙ…`;
    
    return date.toLocaleDateString('ar-EG');
  }

  getCategoryIcon(category) {
    const icons = {
      technology: 'fa-microchip',
      finance: 'fa-chart-line',
      science: 'fa-flask',
      general: 'fa-newspaper'
    };
    
    return icons[category] || 'fa-newspaper';
  }

  truncateText(text, maxLength) {
    if (text.length <= maxLength) return text;
    return text.substr(0, maxLength) + '...';
  }

  showLoadingSkeleton(count) {
    this.newsGrid.innerHTML = '';
    
    for (let i = 0; i < count; i++) {
      const skeleton = document.createElement('article');
      skeleton.className = 'news-card skeleton';
      skeleton.innerHTML = `
        <div class="card-image-wrapper">
          <div class="img-loading"></div>
        </div>
        <div class="card-body">
          <div class="card-meta">
            <span class="category loading"></span>
            <span class="card-date loading"></span>
          </div>
          <h3 class="card-title loading"></h3>
          <p class="card-excerpt loading"></p>
          <div class="card-footer">
            <div class="ai-score loading"></div>
            <div class="card-share">
              <div class="share-btn loading"></div>
              <div class="share-btn loading"></div>
            </div>
          </div>
        </div>
      `;
      
      this.newsGrid.appendChild(skeleton);
    }
  }

  showUpdateNotification() {
    const notification = document.getElementById('updateNotification');
    if (notification) {
      notification.classList.add('active');
    }
  }

  hideUpdateNotification() {
    const notification = document.getElementById('updateNotification');
    if (notification) {
      notification.classList.remove('active');
    }
  }

  showNewNewsNotification(count) {
    const notification = document.getElementById('tickerNotification');
    if (notification) {
      notification.querySelector('.new-count').textContent = count;
      notification.classList.add('active');
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ø¹Ø§Ø¬Ù„Ø©
      this.updateBreakingNewsTicker();
    }
  }

  showErrorNotification() {
    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø®Ø·Ø£ Ù‡Ù†Ø§
    console.error('Failed to fetch news');
  }

  updateBreakingNewsTicker() {
    const ticker = document.querySelector('.ticker');
    if (ticker && this.currentNews.length > 0) {
      const latestNews = this.currentNews.slice(0, 5);
      const tickerItems = latestNews.map(news => 
        `<span class="ticker-item">${news.title}</span>`
      ).join('');
      
      ticker.innerHTML = tickerItems;
    }
  }

  attachCardEvents() {
    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±ÙØ§Ù‚ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    reattachEventListeners();
    
    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„ØªØ±Ø¬Ù…Ø©
    document.querySelectorAll('.translate-btn').forEach(btn => {
      btn.addEventListener('click', async (e) => {
        const text = e.target.closest('.translate-btn').dataset.text;
        await this.translateText(text);
      });
    });
    
    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« ÙØªØ­ Ø§Ù„Ù…Ù‚Ø§Ù„ Ø§Ù„Ø£ØµÙ„ÙŠ
    document.querySelectorAll('.read-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const url = e.target.closest('.read-btn').dataset.url;
        window.open(url, '_blank');
      });
    });
  }

  async translateText(text) {
    // ØªÙ†ÙÙŠØ° Ø§Ù„ØªØ±Ø¬Ù…Ø© Ù‡Ù†Ø§ (ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Google Translate API)
    console.log('ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†Øµ:', text);
  }
}

// ========================================
// CSS Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª
// ========================================

const additionalCSS = `
/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ */
.news-filters {
  display: flex;
  gap: 10px;
  margin-top: 15px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  color: var(--text-secondary);
  font-size: 0.85rem;
  cursor: pointer;
  transition: var(--transition);
}

.filter-btn:hover,
.filter-btn.active {
  background: var(--gradient);
  color: white;
  border-color: transparent;
}

.lang-badge {
  display: inline-block;
  background: rgba(59, 130, 246, 0.2);
  color: var(--primary-color);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.7rem;
  margin-right: 5px;
}

.skeleton .loading {
 